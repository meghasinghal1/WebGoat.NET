name: WebGoat Test Api
 
on:
  push:
    branches: [ master ]
    
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: Amadevus/pwsh-script@v2
      id: script
      with:
        script: |
          $sourcePath = "${{ github.workspace }}/"
          write-host "$sourcePath"
          $destinationPath = Split-Path -Path "$sourcePath"
          $destinationPath += "/${{ github.workflow }}-${{ github.job }}.zip"
          Write-Host "$destinationPath"
    
    - uses: actions/checkout@v1
    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '6.0.403'
    
    # dotnet build and publish
    - name: Build with dotnet
      run: |
        dotnet build --configuration Release ./SAST/SAST.Api/SAST.Api.csproj
